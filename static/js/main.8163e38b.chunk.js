(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{111:function(e,t,c){},113:function(e,t,c){},114:function(e,t,c){},116:function(e,t,c){},152:function(e,t,c){},153:function(e,t,c){},154:function(e,t,c){},155:function(e,t,c){},156:function(e,t,c){},157:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c(32),s=c.n(n),a=c(10),o=c(17),i=c(14),u="API_BOOKS_REQUEST",l="API_BOOKS_FAILED",b="API_BOOKS_SUCCEDED",j="ADD_QUERY",d={isLoading:!1,errMess:null,query:"",books:[]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,errMess:null,books:t.payload});case u:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0,errMess:null,books:[]});case l:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,errMess:t.payload});default:return e}},O={isLoading:!1,errMess:null,query:"",books:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(i.a)(Object(i.a)({},e),{},{query:t.payload});default:return e}},m=c(84),p=c(21),_=c.n(p),f=c(15),k=function(e){return{type:j,payload:{query:e}}},v=function(e){return{type:b,payload:e}},g=function(e){return{type:l,payload:e}},y=function(){return{type:u}},N=c(83),q=c.n(N),L=function(e){return q()({method:"get",url:"".concat("https://openlibrary.org","/search.json?title=").concat(e)})},w=function(e){return e.query.query},M=_.a.mark(A),E=_.a.mark(C),S=_.a.mark(D);function A(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)(j,C);case 2:case"end":return e.stop()}}),M)}function C(){var e,t;return _.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(f.e)(w);case 2:return e=c.sent,c.next=5,Object(f.c)(1e3);case 5:return c.next=7,Object(f.d)(y());case 7:return c.prev=7,c.next=10,Object(f.b)(L,e.query);case 10:if(0!==(t=(t=c.sent).data.docs).length){c.next=17;break}return c.next=15,Object(f.d)(g("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"));case 15:c.next=19;break;case 17:return c.next=19,Object(f.d)(v(t));case 19:c.next=25;break;case 21:return c.prev=21,c.t0=c.catch(7),c.next=25,Object(f.d)(g(c.t0.message));case 25:case"end":return c.stop()}}),E,null,[[7,21]])}function D(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([A()]);case 2:case"end":return e.stop()}}),S)}var I=Object(m.a)(),B=Object(o.createStore)(Object(o.combineReducers)({books:h,query:x}),Object(o.applyMiddleware)(I));I.run(D);var P=c(27),R=c(5),F=c(45),K=(c(111),c(2));var U=Object(a.connect)((function(e){return{books:e.books.books,isLoading:e.books.isLoading,errMess:e.books.errMess}}))((function(e){var t=e.isLoading,c=e.errMess,n=e.books,s=Object(r.useState)(1),a=Object(F.a)(s,2),o=a[0],i=a[1],u=n.slice(0,20*o),l=Math.floor(n.length/20);return Object(K.jsxs)("div",{className:"main",children:[Object(K.jsx)("h1",{className:"main__heading",children:"\u041f\u043e\u0438\u0441\u043a \u043a\u043d\u0438\u0433"}),Object(K.jsx)(z,{}),t&&Object(K.jsx)(G,{text:!0}),c&&Object(K.jsx)(H,{text:c}),n&&0!==n.length&&!c&&Object(K.jsx)(T,{books:u}),o<l&&!c&&Object(K.jsx)("button",{className:"main__more-btn",onClick:function(){i((function(e){return e+1}))},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"})]})})),J=(c(113),function(){return Object(K.jsx)("div",{className:"icon"})});c(114);var Q=function(e){var t=e.book,c="http://covers.openlibrary.org/b/id/".concat(t.cover_i,"-M.jpg");return Object(K.jsx)(P.b,{className:"card",to:"/book/".concat(t.key.slice(7)),children:Object(K.jsxs)("div",{className:"card__group",children:[t.cover_i?Object(K.jsx)("img",{className:"card__image",src:c,alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u043a\u043d\u0438\u0433\u0438"}):Object(K.jsx)(J,{}),Object(K.jsx)("h2",{className:"card__title",children:t.title})]})})},T=(c(116),function(e){var t=e.books;return Object(K.jsx)("div",{className:"bookslist",children:Object(K.jsx)("ul",{className:"bookslist__list",children:t&&t.map((function(e){return Object(K.jsx)("li",{className:"bookslist__item",children:Object(K.jsx)(Q,{book:e})},e.key)}))})})}),Y=c(46);c(152);var z=Object(a.connect)(null,null)((function(e){var t,c=e.dispatch;return Object(K.jsx)("section",{className:"search",children:Object(K.jsxs)(Y.LocalForm,{onChange:function(e){return function(e){c(k(e.query))}(e)},className:"search__form",children:[Object(K.jsx)(Y.Control.text,{className:"search__input",model:".query",name:"query",id:"query",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",validators:{required:function(e){return e&&e.length},minLength:(t=1,function(e){return e&&e.length>=t}),maxLength:function(e){return function(t){return!t||t.length<=e}}(20)}}),Object(K.jsx)(Y.Errors,{className:"search__error",model:".query",show:"touched",messages:{required:"Required. ",minLength:"Must be greater than 1 character",maxLength:"Must be 20 characters or less"}})]})})}));c(153);var G=function(e){var t=e.text;return Object(K.jsxs)("div",{className:"preloader",children:[Object(K.jsx)("i",{className:"circle-preloader"}),t&&Object(K.jsx)("p",{className:"preloader__text",children:"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043a\u043d\u0438\u0433..."})]})};c(154);var H=function(e){var t=e.text;return Object(K.jsx)("div",{className:"error",children:Object(K.jsx)("div",{children:t})})};c(155);var V=Object(a.connect)((function(e){return{books:e.books.books}}))((function(e){var t=e.books,c=Object(R.g)().id,n=t.find((function(e){return e.key==="/works/".concat(c)})),s="http://covers.openlibrary.org/b/id/".concat(n.cover_i,"-L.jpg"),a=Object(r.useState)(!1),o=Object(F.a)(a,2),i=o[0],u=o[1];return Object(K.jsxs)("div",{className:"book",children:[Object(K.jsxs)("div",{children:[!i&&n.cover_i&&Object(K.jsx)(G,{text:!1}),n.cover_i?Object(K.jsx)("img",{className:"book__image",onLoad:function(){u(!0)},src:s,alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u043a\u043d\u0438\u0433\u0438"}):Object(K.jsx)(J,{})]}),Object(K.jsxs)("div",{className:"book__text-group",children:[Object(K.jsx)(P.b,{className:"book__link",to:"/home",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}),Object(K.jsx)("p",{className:"book__subtitle",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438"}),Object(K.jsx)("h2",{className:"book__title",children:n.title}),Object(K.jsx)("p",{className:"book__subtitle",children:"\u0410\u0432\u0442\u043e\u0440\u044b \u043a\u043d\u0438\u0433\u0438"}),n.author_name&&Object(K.jsx)("ul",{className:"book__list",children:n.author_name.map((function(e,t){return Object(K.jsx)("li",{className:"book__list-item",children:Object(K.jsx)("p",{className:"book__text",children:e})},t)}))}),Object(K.jsx)("p",{className:"book__subtitle",children:"\u0413\u043e\u0434 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"}),Object(K.jsx)("p",{className:"book__text",children:n.first_publish_year})]})]})}));c(156);function W(){return Object(K.jsx)("div",{className:"page",children:Object(K.jsx)(a.Provider,{store:B,children:Object(K.jsx)(P.a,{children:Object(K.jsxs)(R.d,{children:[Object(K.jsx)(R.b,{exact:!0,path:"/home",component:U}),Object(K.jsx)(R.b,{path:"/book/:id",component:V}),Object(K.jsx)(R.a,{to:"/home"})]})})})})}var X=document.getElementById("root");s.a.render(Object(K.jsx)(r.Fragment,{children:Object(K.jsx)(W,{})}),X)}},[[157,1,2]]]);
//# sourceMappingURL=main.8163e38b.chunk.js.map